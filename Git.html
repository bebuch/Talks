<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Git</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/black.css">
    <style>
        :root {
            --left: 25%;
            --r-heading-margin: 0.35em 0 1em 0;
        }
        html, body {
            height: 100%;
            margin: 0;
        }
        .row {
            display: flex;
            gap: 3%;
        }
        .left {
            flex-basis: var(--left);
        }
        .right {
            flex-basis: calc(100% - var(--left));
        }
        pre {
            background-color: #222;
            color: #eee;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.1em;
            overflow-x: auto;
        }
        .no-bullets {
            list-style: none; /* remove default bullets */
            margin: 0;
            padding: 0;
        }
        .no-bullets li::marker {
            content: none;    /* Safari/Firefox: remove default bullets */
        }
        .no-bullets li {
            position: relative;
            padding-left: 3em;
        }
        .no-bullets li::before {
            content: attr(data-emoji);
            position: absolute;
            left: 0em;
            width: 2.5em;
            text-align: right;
            white-space: nowrap;
        }
        .git-read {
            color: #0e0;
        }
        .git-write {
            color: #0ff;
        }

        /* Debug */
        .debug .slides {
            outline: aqua 1px solid;
        }
        .debug ul {
            outline: 1px red solid;
        }
        .debug .no-bullets li::before {
            outline: 1px lime solid;
        }
    </style>

    <script type="module">
        import Reveal from 'https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.esm.js';
        import RevealZoom from 'https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/zoom/zoom.esm.js';
        import RevealNotes from 'https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/notes/notes.esm.js';
        import RevealSearch from 'https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/search/search.esm.js';
        import RevealMarkdown from 'https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/markdown/markdown.esm.js';
        import RevealHighlight from 'https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.esm.js';
        import RevealMermaid from 'https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@2.3.0/plugin/mermaid/mermaid.esm.js';

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll('pre').forEach(pre => {
                const lines = pre.textContent.split('\n');

                // Find the indentation of the first non-empty line
                const firstLineIndentMatch = lines.find(line => line.trim().length > 0)?.match(/^(\s*)/);
                const firstIndent = firstLineIndentMatch ? firstLineIndentMatch[1].length : 0;

                // Remove the indentation
                const adjustedLines = lines.map(line => line.slice(firstIndent));

                pre.textContent = adjustedLines.join('\n').trim();
            });

            document.querySelectorAll("svg.isolate").forEach((svg) => {
                // Serialize SVG to string
                const svgString = new XMLSerializer().serializeToString(svg);

                // Create a Blob and generate a data URL
                const blob = new Blob([svgString], { type: "image/svg+xml" });
                const url = URL.createObjectURL(blob);

                // Create <object> element
                const objectElement = document.createElement("img");
                objectElement.setAttribute("src", url);
                objectElement.setAttribute("width", svg.getAttribute("width") || "100%");
                objectElement.setAttribute("height", svg.getAttribute("height") || "100%");

                // Copy relevant styling or attributes if needed (optional)
                objectElement.className = svg.className;
                objectElement.style.cssText = svg.style.cssText;

                // Replace SVG with object
                svg.parentNode.replaceChild(objectElement, svg);
            });

            // Initialize Reveal with all Plugins
            Reveal.initialize({
                width: 1800,
                height: 1200,
                controls: true,
                slideNumber: true,
                progress: true,
                center: true,
                hash: true,
                plugins: [
                    RevealZoom,
                    RevealNotes,
                    RevealSearch,
                    RevealMarkdown,
                    RevealHighlight,
                    RevealMermaid
                ]
            });

            document.addEventListener('keydown', function(event) {
                if (event.key === 't') {
                    document.documentElement.classList.toggle('light');
                } else if (event.key === 'd') {
                    document.documentElement.classList.toggle('debug');
                }
            });

            Array.from(document.querySelector('.slides').getElementsByClassName('rw-colornote')).forEach(function(element) {
                element.insertAdjacentHTML('beforeend',
                    '<span style="position:absolute;right:0;top:0;font-size:0.5em;"><code class="git-read">read</code><code>/</code><code class="git-write">write</code></span>');
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
</head>
<body>

<div class="reveal">
    <div class="slides">
        <section>
            <h2>Grundkonzepte von Git</h2>
            <div style="display: flex; gap: 1rem;">
                <ul class="no-bullets" style="width: max-content; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="üìÅ">Repository (Repo)</li>
                    <li data-emoji="üìù">Working Directory (WD)</li>
                    <li data-emoji="üéØ">Staging Area (SA)</li>
                    <li data-emoji="üì¶">Commit</li>
                    <li data-emoji="üåø">Branch</li>
                </ul>
                <ul class="no-bullets" style="width: max-content; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="üîÄ">Merge</li>
                    <li data-emoji="‚öîÔ∏è">Conflict</li>
                    <li data-emoji="üåê">Remote</li>
                    <li data-emoji="üîÉ">Pull &amp; Push</li>
                    <li data-emoji="üè∑Ô∏è">Tag</li>
                </ul>
            </div>
        </section>

        <section class="rw-colornote">
            <h2 style="margin-top:2em;"><code>git init</code></h2>
            <ul class="no-bullets">
                <li data-emoji="üöÄ"><code class="git-write">git init</code><br/>Erstellt im aktuellen Verzeichnis ein neues Repo (<code>.git</code>).</li>
            </ul>
        </section>

        <section class="rw-colornote">
            <h2><code>git config</code></h2>
            <ul class="no-bullets" style="display: grid; row-gap: 1em;">
                <li data-emoji="‚öôÔ∏è">Liest und schreibt Git-Einstellungen:
                    <ul class="no-bullets" style="display: grid; row-gap: 0.4em; margin-top: 0.4em;">
                        <li data-emoji="üîç"><code class="git-read">git config user.name</code><br/>Liest den aktuellen Wert.</li>
                        <li data-emoji="‚úèÔ∏è"><code class="git-write">git config user.name "Name"</code><br/>Schreibt den Wert lokal im aktuellen Repo.</li>
                        <li data-emoji="üåê"><code class="git-write">git config --global user.name "Name"</code><br/>Schreibt den Wert global im Benutzeraccount.</li>
                        <li data-emoji="üñ•Ô∏è"><code class="git-write">git config --system user.name "Name"</code><br/>Schreibt den Wert systemweit (eventuell Admin-Rechte ben√∂tigt).</li>
                    </ul>
                </li>
                <li data-emoji="üìÇ"><strong>Speicherorte:</strong>
                    <ul class="no-bullets" style="display: grid; row-gap: 0.4em; margin-top: 0.4em;">
                        <li data-emoji="üìÅüìÑ">Lokal: <code>./.git/config</code></li>
                        <li data-emoji="üåêüìÑ">Global: <code>~/.gitconfig</code></li>
                        <li data-emoji="üñ•Ô∏èüìÑ">System: <code>/etc/gitconfig</code> (Installation)</li>
                    </ul>
                </li>
                <li data-emoji="üì•"><strong>Lesereihenfolge:</strong> System ‚Üí Global ‚Üí Lokal (lokale Werte √ºberschreiben globale).</li>
            </ul>
        </section>

        <section>
            <h2>Repository und Working Directory (WD)</h2>
            <div style="display: flex; gap: 1rem;">
                <ul class="no-bullets" style="width: max-content; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="üìù"><strong>Working Directory:</strong> Dein lokaler Projektordner, in dem du Dateien bearbeitest und speicherst.</li>
                    <li data-emoji="üìÅ"><strong><code>.git</code>:</strong> Verstecktes Unterverzeichnis, das alle Versionsdaten und Metadaten enth√§lt ‚Äì das eigentliche Repo.</li>
                </ul>
                <ul class="no-bullets" style="width: max-content; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="üöß"><strong>Trennung:</strong> Das WD geh√∂rt nicht zum Repo und zeigt nur den aktuellen Arbeitszustand. Das WD enth√§lt das Repo.</li>
                    <li data-emoji="üîÑ"><strong>Datenfluss:</strong> Beim Auschecken werden Dateien aus <code>.git</code> ins WD geladen; beim Einchecken vom WD ins <code>.git</code>.</li>
                </ul>
            </div>
        </section>

        <section>
            <h2>üå¨Ô∏èüåä Git Datenfluss</h2>

            <svg class="isolate" width="1600" height="800" viewBox="0 -15 600 285" xmlns="http://www.w3.org/2000/svg">
                <style>
                    :root {
                        background: transparent;
                        font-size: 16px;
                        color-scheme: light dark;
                        --text-color: light-dark(black, white);
                        --arrow-color: light-dark(black, white);
                        --border-color: light-dark(black, white);
                    }
                    .box {
                        stroke: var(--border-color);
                        stroke-width: 2px;
                    }
                    .label {
                        font-weight: bold;
                        fill: var(--text-color);
                    }
                    .line {
                        stroke: var(--arrow-color);
                        stroke-width: 2px;
                    }
                    .arrow {
                        stroke: var(--arrow-color);
                        stroke-width: 2px;
                        marker-end: url(#arrowhead);
                    }
                </style>
            </svg>

            <script type="module">
                const svg = d3.select("svg");

                const arrowSize = 8;
                svg.append("defs").append("marker")
                    .attr("id", "arrowhead")
                    .attr("class", "arrowhead")
                    .attr("viewBox", `0 ${-arrowSize} ${2* arrowSize} ${2* arrowSize}`)
                    .attr("refX", arrowSize)
                    .attr("refY", 0)
                    .attr("orient", "auto")
                    .attr("markerWidth", arrowSize)
                    .attr("markerHeight", arrowSize)
                    .attr("xoverflow", "visible")
                    .append("svg:path")
                    .attr("d", `M 0,${-arrowSize} L ${2* arrowSize} ,0 L 0,${arrowSize}`)
                    .style("fill", "var(--arrow-color)")
                    .style("mix-blend-mode", "exclusion")
                    .style("stroke", "none");

                const y = 10;
                const height = 260;
                const boxWidth = 170;
                const spacing = 30;

                const colors = {
                    wd: "light-dark(#e1f5fe, #1e0a01)",
                    repo: "light-dark(#c8e6c9, #371936)",
                    sa: "light-dark(#ffe082, #001f7d)",
                    activeColor: "light-dark(#64b5f6, #9b4a09)",
                    inactiveColor: "light-dark(#bbdefb, #442104)",
                };

                // Working Directory
                const wdX = 10;
                const wdY = 30;
                svg.append("rect")
                    .attr("x", wdX)
                    .attr("y", y + wdY)
                    .attr("width", boxWidth)
                    .attr("height", height - wdY - 10)
                    .attr("rx", 6)
                    .attr("class", "box")
                    .style("fill", colors.wd);
                svg.append("text")
                    .attr("x", wdX + boxWidth / 2)
                    .attr("y", wdY + y - 10)
                    .attr("text-anchor", "middle")
                    .attr("class", "label")
                    .text("Working Directory");

                // Repository
                const repoX = wdX + boxWidth + spacing;
                const repoWidth = 2 * boxWidth + 40;
                svg.append("rect")
                    .attr("x", repoX)
                    .attr("y", y)
                    .attr("width", repoWidth)
                    .attr("height", height)
                    .attr("class", "box")
                    .style("fill", colors.repo);
                svg.append("text")
                    .attr("x", repoX + repoWidth / 2)
                    .attr("y", y - 10)
                    .attr("text-anchor", "middle")
                    .attr("class", "label")
                    .text("Repository = .git Directory im WD");

                // Staging Area (left inside Repo, offset for arrow)
                const saX = repoX + 30;
                const saWidth = boxWidth - 20;
                svg.append("rect")
                    .attr("x", saX)
                    .attr("y", y + 30)
                    .attr("width", saWidth)
                    .attr("height", height - 40)
                    .attr("rx", 6)
                    .attr("class", "box")
                    .style("fill", colors.sa);
                svg.append("text")
                    .attr("x", saX + saWidth / 2)
                    .attr("y", y + 22)
                    .attr("text-anchor", "middle")
                    .attr("class", "label")
                    .text("Staging Area");

                // Features (ex-branches) right of SA
                const features = [
                    { name: "NEXT", color: colors.inactiveColor, dasharray: "1" },
                    { name: "HEAD", color: colors.activeColor, dasharray: "0" },
                    { name: "HEAD~1", color: colors.inactiveColor, dasharray: "0" },
                    { name: "HEAD~2", color: colors.inactiveColor, dasharray: "0" }
                ];
                const featureX = saX + saWidth + 40;
                const featureCount = features.length;
                const featureBoxHeight = (height - 40 - ((featureCount - 1) * 10)) / featureCount;

                svg.append("text")
                    .attr("x", featureX + (boxWidth - 30) / 2)
                    .attr("y", y + 22)
                    .attr("text-anchor", "middle")
                    .attr("class", "label")
                    .text("Commits");

                features.forEach((f, i) => {
                    const fy = y + 30 + i * (featureBoxHeight + 10);
                    if (i === 0) {
                        // SA ‚Üí featureX
                        svg.append("line")
                            .attr("x1", saX + saWidth)
                            .attr("y1", fy + featureBoxHeight / 2)
                            .attr("x2", featureX - arrowSize)
                            .attr("y2", fy + featureBoxHeight / 2)
                            .attr("class", "arrow");
                    } else {
                        // Commit ‚Üí Next Commit
                        svg.append("line")
                            .attr("x1", featureX + (boxWidth - 30) / 2)
                            .attr("y1", fy - 10)
                            .attr("x2", featureX + (boxWidth - 30) / 2)
                            .attr("y2", fy)
                            .attr("class", "line");
                    }

                    svg.append("rect")
                        .attr("x", featureX)
                        .attr("y", fy)
                        .attr("width", boxWidth - 30)
                        .attr("height", featureBoxHeight)
                        .attr("rx", 6)
                        .attr("class", "box")
                        .style("fill", f.color)
                        .style("stroke-dasharray", f.dasharray);
                    svg.append("text")
                        .attr("x", featureX + (boxWidth - 30) / 2)
                        .attr("y", fy + featureBoxHeight / 2 + 5)
                        .attr("text-anchor", "middle")
                        .text(f.name);
                });

                // WD ‚Üí SA
                svg.append("line")
                    .attr("x1", wdX + boxWidth)
                    .attr("y1", y + height / 2)
                    .attr("x2", saX - arrowSize)
                    .attr("y2", y + height / 2)
                    .attr("class", "arrow");
            </script>
        </section>

        <section class="rw-colornote">
            <h2>üéØ Staging Area (SA)</h2>
            <div style="display: flex; gap: 1rem;">
                <ul class="no-bullets" style="width: 30%; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="üóÉÔ∏è">Zwischenspeicher im Repo f√ºr vorgemerkte √Ñnderungen</li>
                    <li data-emoji="‚è©">√Ñnderungen wandern von WD in SA</li>
                    <li data-emoji="‚úÖ">Dient Auswahl genau der √Ñnderungen, die in die n√§chste Version einflie√üen</li>
                    <li data-emoji="üì¶">Git erzeugt daraus sp√§ter eine neue Version im Repo</li>
                </ul>
                <ul class="no-bullets" style="width: 70%; margin: 0 auto; display: grid; row-gap: 0.5em;">
                    <li data-emoji="‚úÖ"><code class="git-write">git add &lt;file&gt;</code><br>
                        Kopiert √Ñnderungen aus WD in SA.
                    </li>
                    <li data-emoji="‚úÖüéöÔ∏è"><code class="git-write">git add -p</code><br>
                        Interaktives Hunk-Staging f√ºr feink√∂rnige Kontrolle.
                    </li>
                    <li data-emoji="‚ùå"><code class="git-write">git rm &lt;file&gt;</code><br>
                        Entfernt Datei aus WD und markiert L√∂schung in SA.
                    </li>
                    <li data-emoji="‚û°Ô∏è"><code class="git-write">git mv &lt;old&gt; &lt;new&gt;</code><br>
                        Bennent Dateien in WD um und f√ºgt Umbenennung zu SA hinzu.
                    </li>
                    <li data-emoji="‚Ü©Ô∏è"><code class="git-write">git restore --staged &lt;file&gt;</code><br>
                        Hebt die Vormerkung in der SA auf, das WD bleibt unver√§ndert.
                    </li>
                    <li data-emoji="üîç"><code class="git-read">git diff --staged</code><br>
                        Zeigt die Unterschiede zwischen SA und letzter Version im Repo.
                    </li>
                </ul>
            </div>
        </section>
    </div>
</div>
</body>
</html>
